"use strict";(self.webpackChunkmodamia_app=self.webpackChunkmodamia_app||[]).push([[55],{4504:(t,e,n)=>{n.d(e,{Z:()=>i});var o=n(184);const i=t=>{let{children:e}=t;return(0,o.jsx)("div",{className:"container",children:e})}},8055:(t,e,n)=>{n.r(e),n.d(e,{default:()=>p});var o=n(2791),i=n(4504),s=n(1632),a=n(6037),l=n(1726),r=n(971),c=n(7689),d=n(9806),u=n(184);const v=t=>{let{icon:e,heading:n,link:o={url:"",CTAText:""}}=t;const i=(0,c.s0)();return(0,u.jsxs)("div",{className:"EmptyBodyUI",children:[(0,u.jsx)("div",{className:"EmptyBodyUI__image",children:(0,u.jsx)(d.G,{icon:e})}),(0,u.jsx)("div",{className:"EmptyBodyUI__info",children:(0,u.jsx)(r.Z,{text:n,size:"32px",align:"center",color:a.ue})}),(0,u.jsx)(l.o,{onClick:()=>{return t=o.url,i(t);var t},children:o.CTAText})]})};var h=n(4222);const g=t=>{let{min:e=null,max:n=null,selected:i=null,onCountChange:s=(()=>{})}=t;const[a,l]=(0,o.useState)(e);(0,o.useEffect)((()=>{s(a)}),[a]),(0,o.useEffect)((()=>{null!==i&&l(i)}),[i]),(0,o.useEffect)((()=>{n&&n<a&&l(n||1)}),[n]);return(0,u.jsx)("div",{className:"counterUI",children:(0,u.jsxs)("div",{className:"counterUI__body",children:[(0,u.jsx)("button",{type:"button",onClick:()=>{1!==a&&l(a-1)},className:"counterUI__button counterUI__minus"}),(0,u.jsx)("div",{className:"counterUI__number",children:(0,u.jsx)("span",{children:a})}),(0,u.jsx)("button",{type:"button",onClick:()=>{n&&a+1>n||l(a+1)},className:"counterUI__button counterUI__plus"})]})})},m=t=>{let{modelData:e}=t;const{name:n="",color:i="",price:s=0,size:l=""}=e,[c,d]=(0,o.useState)(1),v=s*c;return(0,u.jsxs)("div",{className:"product_info_body-content",children:[(0,u.jsx)(r.Z,{text:n,size:"22px",color:a.ue}),i&&(0,u.jsxs)("div",{className:"product_info_body-content-text",children:[(0,u.jsx)(r.Z,{text:"Color: ",size:"16px"}),(0,u.jsx)("span",{children:i})]}),(0,u.jsxs)("div",{className:"product_info_body-content-text",children:[(0,u.jsx)(r.Z,{text:"Price: ",size:"16px"}),(0,u.jsxs)("span",{children:["$",s]})]}),(0,u.jsxs)("div",{className:"product_info_body-content-text",children:[(0,u.jsx)(r.Z,{text:"Quantity: ",size:"16px"}),(0,u.jsx)(g,{selected:1,onCountChange:t=>d(t)})]}),(0,u.jsxs)("div",{className:"product_info_body-content-text",children:[(0,u.jsx)(r.Z,{text:"Total: ",size:"16px"}),(0,u.jsxs)("span",{children:["$",v]})]}),l&&(0,u.jsxs)("div",{className:"product_info_body-content-text",children:[(0,u.jsx)(r.Z,{text:"Size: ",size:"16px"}),(0,u.jsx)("span",{children:l})]})]})};var f=n(555);const x=t=>{let{removeFromCart:e,checkoutItem:n,data:i}=t;const a=(0,o.useRef)(null);return(0,o.useEffect)((()=>{(0,f.W$)(.3,i.modelData,"fronts",a,i.activeMannequin,i.modelData,!0)}),[i,a]),(0,u.jsxs)("div",{className:"product_canvas",children:[(0,u.jsx)("div",{className:"product_canvas-image",children:(0,u.jsx)("canvas",{ref:a})}),(0,u.jsxs)("div",{className:"product_info_body",children:[(0,u.jsx)(m,{modelData:i}),(0,u.jsxs)("div",{className:"product_info_body-actions",children:[(0,u.jsx)(l.o,{classN:"product_info_body-action",version:"gray",onClick:()=>e(null===i||void 0===i?void 0:i.id),children:(0,u.jsx)(d.G,{icon:s.$aW})}),(0,u.jsx)(l.o,{classN:"product_info_body-action",onClick:()=>n(i),children:"Checkout"})]})]})]})},p=()=>{const[t,e]=(0,o.useState)([]);(0,o.useEffect)((()=>{localStorage.hasOwnProperty("basket")&&e(JSON.parse(localStorage.getItem("basket")||"[]"))}),[]);const n=async t=>{await(0,h.Z5)({details:t}),await a(t.id)},a=async t=>{const n=localStorage.hasOwnProperty("basket")?JSON.parse(localStorage.getItem("basket")||"[]"):[],o=null===n||void 0===n?void 0:n.filter((e=>(null===e||void 0===e?void 0:e.id)!==t));o.length?(localStorage.setItem("basket",JSON.stringify(o)),e(o)):(localStorage.removeItem("basket"),e([]))};return(0,u.jsx)(i.Z,{children:t.length?(0,u.jsx)("div",{className:"shop_container",children:t.map(((t,e)=>(0,u.jsx)(x,{data:t,checkoutItem:n,removeFromCart:a},e)))}):(0,u.jsx)(v,{icon:s.yYj,heading:"Your shop cart is empty",link:{url:"/customization",CTAText:"Start Shopping"}})})}},555:(t,e,n)=>{n.d(e,{W$:()=>c});var o=n(7098),i=n(6037);const s=[];async function a(t,e,n,o,i,s){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;const l=t.src||i.src,r=t.color||i.color,c=t.position||i.position,d=t.order||i.order,u=s?t.width/5*a:t.width||i.width,v=s?t.height/5*a:t.height||i.height,h=t.id||i.id;if(!l)return;const g=new Image;return g.src=await async function(t,e,n,o){const i=new Image;i.src=t,i.crossOrigin="*",await new Promise((t=>{i.onload=t}));const s=document.createElement("canvas").getContext("2d");if(!s)return"";if(s.canvas.width=n,s.canvas.height=o,s.clearRect(0,0,n,o),s.drawImage(i,0,0,n,o),e){const t=s.getImageData(0,0,n,o),i=t.data;let a=parseInt(e.substring(1),16);if(3===e.substring(1).length){let t="";for(let n=0;n<3;n++)t+=e.substring(1)[n]+e.substring(1)[n];a=parseInt(t,16)}const l=(16711680&a)>>16,r=(65280&a)>>8,c=255&a;let d;for(let e=0;e<i.length;e+=4)d=(i[e]/255+i[e+1]/255+i[e+2]/255+i[e+3]/255)/4,i[e]=l*d,i[e+1]=r*d,i[e+2]=c*d;s.putImageData(t,0,0)}return s.canvas.toDataURL("image/png")}(l,r,e,n),await new Promise((t=>{g.onload=t})),{img:g,position:c,color:r,widthImg:u,heightImg:v,order:d,frontBack:o,id:h}}async function l(t,e,n,o,i,s,a,l,r){let c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,d=arguments.length>10&&void 0!==arguments[10]&&arguments[10];if(!e)return n;const u=new Image;if(u.src=e,u.crossOrigin="*",await new Promise((t=>{u.onload=t})),!n)return n.drawImage(u,0,0,o,i);t||n.drawImage(u,0,"bottom"===a?i-r:0,l,r);const v=document.createElement("canvas").getContext("2d");if(!v)return n.drawImage(u,0,0,o,i);v.canvas.width=o,v.canvas.height=i,v.clearRect(0,0,o,i),v.drawImage(u,0,0,d?o/5*c:o,d?i/5*c:i);const h=v.getImageData(0,0,o,i).data;let g=new Image;g.src=t,g.crossOrigin="*",await new Promise((t=>{g.onload=t}));const m=document.createElement("canvas").getContext("2d");if(!m)return n.drawImage(u,0,0,o,i);m.canvas.width=o,m.canvas.height=i,m.globalAlpha=1,m.globalCompositeOperation="multiply",m.clearRect(0,0,o,i),m.drawImage(u,0,0,d?o/5*c:o,d?i/5*c:i);for(let w=0;w*g.width*s<o;w++)for(let t=0;t*i*s<i;t++)m.drawImage(g,0,0,g.width,g.height,w*o*s,t*i*s,o*s,i*s);const f=m.getImageData(0,0,o,i),x=f.data;for(let w=0;w<h.length;w+=4)x[w+3]=h[w+3];m.putImageData(f,0,0);const p=new Image;return p.src=m.canvas.toDataURL("image/png"),await new Promise((t=>p.onload=t)),n.drawImage(p,0,a.includes("bottom")?i-(d?r/5*c:r):0,l,r)}let r;const c=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fronts",c=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,v=arguments.length>6?arguments[6]:void 0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;if(!c.current||null===d||void 0===d||!d._id)return;const g=c.current;let m=null===g||void 0===g?void 0:g.getContext("2d");const f=new Image;f.src="fronts"===n?"".concat(o.jV).concat(null===d||void 0===d?void 0:d.fronturl):"backs"===n?"".concat(o.uW).concat(null===d||void 0===d?void 0:d.backurl):"".concat(o.jV).concat(null===d||void 0===d?void 0:d.fronturl),f.onload=async()=>{const o=v?d.width/5*h:d.width,g=v?d.height/5*h:d.height;if(null===c.current)return;c.current.width=o,c.current.height=g;const x=o/g;let p=o,w=o/x;w>g&&(w=g,p=g*x);const b=(o-p)/2*h,j=(g-w)/2*h;null===m||void 0===m||m.clearRect(0,0,o,g),null===m||void 0===m||m.drawImage(f,b,j,p,w);const I=s.findIndex((t=>"sleeves"===(null===t||void 0===t?void 0:t.frontBack)));!e.sleeves[0].src&&s.length>2&&s.splice(I,1);for(let c=0;c<e[n].length;c++)if("color"===e[n][c].activeCategory)r=await a(e[n][c],o,g,n,u[n][c],v,h),(0,i.HA)(r,s,n),"sleeves"===n&&(r=await a(e.fronts[c],o,g,"fronts",u.fronts[c],v,h),(0,i.HA)(r,s,n));else if("print"===e[n][c].activeCategory){var _,y,N,C,k,U,S,D,E,R,z,Z,O,A,P,T,B,L,$,H,W,J,F,G,V,Y,q,M,Q,K,X,tt,et,nt,ot,it;if(l(e[n][c].printImageURL,null!==(_=e[n])&&void 0!==_&&null!==(y=_[c])&&void 0!==y&&y.src?null===(N=e[n])||void 0===N||null===(C=N[c])||void 0===C?void 0:C.src:null===(k=u[n])||void 0===k||null===(U=k[c])||void 0===U?void 0:U.src,m,o,g,t,e[n][c].position?e[n][c].position:u[n][c].position,null!==(S=e[n])&&void 0!==S&&null!==(D=S[c])&&void 0!==D&&D.width?null===(E=e[n])||void 0===E||null===(R=E[c])||void 0===R?void 0:R.width:null===(z=u[n])||void 0===z||null===(Z=z[c])||void 0===Z?void 0:Z.width,null!==(O=e[n])&&void 0!==O&&null!==(A=O[c])&&void 0!==A&&A.height?null===(P=e[n])||void 0===P||null===(T=P[c])||void 0===T?void 0:T.height:null===(B=u[n])||void 0===B||null===(L=B[c])||void 0===L?void 0:L.height,h,v),"sleeves"===n)l(e.fronts[c].printImageURL,null!==($=e.fronts)&&void 0!==$&&null!==(H=$[c])&&void 0!==H&&H.src?null===(W=e.fronts)||void 0===W||null===(J=W[c])||void 0===J?void 0:J.src:null===(F=u.fronts)||void 0===F||null===(G=F[c])||void 0===G?void 0:G.src,m,o,g,t,e.fronts[c].position,null!==(V=e.fronts)&&void 0!==V&&null!==(Y=V[c])&&void 0!==Y&&Y.width?null===(q=e.fronts)||void 0===q||null===(M=q[c])||void 0===M?void 0:M.width:null===(Q=u.fronts)||void 0===Q||null===(K=Q[c])||void 0===K?void 0:K.width,null!==(X=e.fronts)&&void 0!==X&&null!==(tt=X[c])&&void 0!==tt&&tt.height?null===(et=e.fronts)||void 0===et||null===(nt=et[c])||void 0===nt?void 0:nt.height:null===(ot=u.fronts)||void 0===ot||null===(it=ot[c])||void 0===it?void 0:it.height,h,v)}else{var st,at;if("sleeves"===n)r=await a(null===(at=e.fronts)||void 0===at?void 0:at[c],o,g,"fronts",u.fronts[c],v,h),(0,i.HA)(r,s,"fronts");r=await a(null===(st=e[n])||void 0===st?void 0:st[c],o,g,n,u[n][c],v,h),(0,i.HA)(r,s,n)}await async function(t,e){const n=t.sort(((t,e)=>t.order-e.order));for(const o of n){const{img:t,position:n,widthImg:i,heightImg:s}=o;e.drawImage(t,0,n.includes("bottom")?e.canvas.height-s:0,i,s)}}(s,m)}}},3083:(t,e,n)=>{n.d(e,{R:()=>o});const o=()=>{}},1726:(t,e,n)=>{n.d(e,{o:()=>l});var o=n(3083),i=n(184);const s=t=>{let{classN:e}=t;return(0,i.jsx)("div",{className:"LoaderCircleUI ".concat(e)})},a={default:"default-btn",red:"red-btn",orange:"orange-btn",blue:"blue-btn",green:"green-btn",gray:"gray-btn"},l=t=>{let{children:e,type:n="button",version:l="default",classN:r="",disabled:c=!1,isLoading:d=!1,onClick:u=o.R,...v}=t;return(0,i.jsx)("button",{...v,className:"ButtonUI ".concat(r," ").concat(a[l]," ").concat(c?"_disabled":""),type:n,onClick:t=>!c&&!d&&u(t),children:d?(0,i.jsx)(s,{}):e})}}}]);
//# sourceMappingURL=55.ae6b8d4c.chunk.js.map