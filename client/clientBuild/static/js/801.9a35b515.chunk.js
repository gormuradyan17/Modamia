"use strict";(self.webpackChunkmodamia_app=self.webpackChunkmodamia_app||[]).push([[801],{801:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var o=n(791);async function s(e,t,n,o,s){const a=new Image;a.src=await async function(e,t,n,o){const s=new Image;s.src=e,s.crossOrigin="*",await new Promise((e=>{s.onload=e}));const a=document.createElement("canvas").getContext("2d");if(!a)return"";if(a.canvas.width=n,a.canvas.height=o,a.clearRect(0,0,n,o),a.drawImage(s,0,0,n,o),t){const e=a.getImageData(0,0,n,o),s=e.data;let i=parseInt(t.substring(1),16);if(3===t.substring(1).length){let e="";for(let n=0;n<3;n++)e+=t.substring(1)[n]+t.substring(1)[n];i=parseInt(e,16)}const r=(16711680&i)>>16,l=(65280&i)>>8,c=255&i;let d;for(let t=0;t<s.length;t+=4)d=(s[t]/255+s[t+1]/255+s[t+2]/255+s[t+3]/255)/4,s[t]=r*d,s[t+1]=l*d,s[t+2]=c*d;a.putImageData(e,0,0)}return a.canvas.toDataURL("image/png")}(e,t,o,s),await new Promise((e=>{a.onload=e})),n.drawImage(a,0,0,o,s)}async function a(e,t,n,o,s,a){const i=new Image;if(i.src=t,i.crossOrigin="*",await new Promise((e=>{i.onload=e})),!n)return n.drawImage(i,0,0,o,s);if(!e)return n.drawImage(i,0,0,o,s);const r=document.createElement("canvas").getContext("2d");if(!r)return n.drawImage(i,0,0,o,s);r.canvas.width=o,r.canvas.height=s,r.clearRect(0,0,o,s),r.drawImage(i,0,0,o,s);const l=r.getImageData(0,0,o,s).data;let c=new Image;c.src=e,c.crossOrigin="*",await new Promise((e=>{c.onload=e}));const d=document.createElement("canvas").getContext("2d");if(!d)return n.drawImage(i,0,0,o,s);d.canvas.width=o,d.canvas.height=s,d.globalAlpha=1,d.globalCompositeOperation="multiply",d.clearRect(0,0,o,s),d.drawImage(i,0,0,o,s);for(let v=0;v*c.width*a<o;v++)for(let e=0;e*s*a<s;e++)d.drawImage(c,0,0,o,s,v*c.width*a,e*s*a,o*a,s*a);const u=d.getImageData(0,0,o,s),h=u.data;for(let v=0;v<l.length;v+=4)h[v+3]=l[v+3];d.putImageData(u,0,0);const g=new Image;return g.src=d.canvas.toDataURL("image/png"),await new Promise((e=>g.onload=e)),n.drawImage(g,0,0,o,s)}var i=n(98),r=n(971),l=n(153),c=n(434),d=n(944),u=n(632),h=n(806);const g=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,o.useEffect)((()=>{const n=n=>{e.current&&!e.current.contains(n.target)&&t()};return document.addEventListener("click",n),()=>{document.removeEventListener("click",n)}}),[n]),{}};var v=n(184);const m=e=>{let{text:t,options:n,onChange:s,classN:a="",label:i="",error:l,defaultValue:c,disabled:d=!1}=e;const[m,f]=(0,o.useState)(!1),[p,x]=(0,o.useState)(t),w=(0,o.useRef)(null),b=(0,o.useRef)(null);g(w,(()=>f(!1)),m);return(0,v.jsxs)(v.Fragment,{children:[i&&(0,v.jsx)(r.Z,{size:"18px",color:"#aa8a75",text:i}),l&&(0,v.jsx)("span",{className:"error-message",children:l}),(0,v.jsxs)("div",{className:"DropdownUI ".concat(a," ").concat(d?"_disabled":""),ref:w,children:[(0,v.jsxs)("div",{onClick:e=>d?e.preventDefault():void f(!m),className:"DropdownUI__button".concat(m?" _active":"").concat(l?" _error":""),children:[c||p,m?(0,v.jsx)(h.G,{className:"DropdownUI__icon",icon:u.l1h}):(0,v.jsx)(h.G,{className:"DropdownUI__icon",icon:u.eW2})]}),(0,v.jsx)("div",{className:"DropdownUI__content customYScrollbar".concat(m?" _active":""),ref:b,children:Boolean(null===n||void 0===n?void 0:n.length)&&(null===n||void 0===n?void 0:n.map(((e,t)=>{let{id:o,text:a,value:i}=e;return(0,v.jsx)("div",{onClick:e=>function(e,t){const o=e.target.textContent;o&&x(o),s(n[t]),f(!m)}(e,t),className:"DropdownUI__option",children:a||i},o)})))})]})]})};n(111);var f=n(93);const p=()=>{const e=(0,c.v9)(d.Pn),t=(0,c.I0)(),n=(0,c.v9)(d.lU),s=(0,c.v9)(d.Vh),a=(0,f.VV)(s),i=n=>{const o=(0,f.ln)(e,n,"colors");null!==o&&void 0!==o&&o._id&&t((0,d.ls)({name:null===o||void 0===o?void 0:o.name,colors:null===o||void 0===o?void 0:o.colors,_id:null===o||void 0===o?void 0:o._id}))};return(0,o.useEffect)((()=>{i(null===n||void 0===n?void 0:n.name)}),[]),(0,v.jsx)(m,{options:a,onChange:e=>(e=>{const{text:t=""}=e;i(t)})(e),defaultValue:null===n||void 0===n?void 0:n.name,classN:"color-dropdown-styles"})};n(49);var x=n(158);const w=()=>{const e=(0,c.v9)(x.MK),t=(0,c.I0)(),n=(0,c.v9)(x.lU),s=(0,c.v9)(x.NB),a=(0,f.VV)(s),i=n=>{if("All"===n){const o=null===e||void 0===e?void 0:e.reduce((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const{grouped:n=[]}=t||{};return null===n||void 0===n||n.map((t=>e.push(t))),e}),[]);t((0,x.ls)({name:n,prints:o,_id:"All"}))}else{const o=(0,f.ln)(e,n,"prints");o&&t((0,x.ls)({name:n,prints:null===o||void 0===o?void 0:o.prints,_id:null===o||void 0===o?void 0:o._id}))}};return(0,o.useEffect)((()=>{i(null===n||void 0===n?void 0:n.name)}),[]),(0,v.jsx)(m,{options:[{id:"All",text:"All",value:"All"},...a],onChange:e=>(e=>{const{text:t=""}=e;i(t)})(e),defaultValue:null===n||void 0===n?void 0:n.name,classN:"print-dropdown-styles"})},b=e=>{let{tabs:t}=e;const n=(0,c.I0)(),[s,a]=(0,o.useState)("");(0,o.useEffect)((()=>{t&&a(t[0].heading)}),[t]);const i=e=>e.heading===s&&"Color"===s?(0,v.jsx)(p,{}):e.heading===s&&"Print"===s?(0,v.jsx)(w,{}):(0,v.jsx)(r.Z,{color:"#000",text:e.heading,size:"18px",align:"left"});return(0,v.jsx)("div",{className:"CustomizationTabs",children:(0,v.jsxs)("div",{className:"CustomizationTabs-body",children:[(0,v.jsx)("div",{className:"CustomizationTabs-heads",children:t&&t.map(((e,t)=>(0,v.jsx)("div",{className:"CustomizationTabs-head ".concat(e.heading===s?"_active":""),onClick:()=>{a(e.heading);(e=>{n((0,l.Qr)(e))})("Color"===e.heading?"color":"Print"===e.heading?"print":"Silhouette"===e.heading?"silhouette":"")},children:i(e)},e.id||t)))}),(0,v.jsx)("div",{className:"CustomizationTabs-contents",children:t&&t.map(((e,t)=>(0,v.jsx)("div",{className:"CustomizationTabs-content ".concat(e.heading===s?"_active":""),children:e.content||(0,v.jsx)(r.Z,{color:"black",size:"16px",text:"Nothing to show"})},e.id||t)))})]})})},j=(0,o.lazy)((()=>n.e(166).then(n.bind(n,166)))),y=(0,o.lazy)((()=>n.e(275).then(n.bind(n,275)))),I=(0,o.lazy)((()=>n.e(73).then(n.bind(n,73)))),C=()=>{const[e,t]=(0,o.useState)([{id:1,heading:"Silhouette",content:(0,v.jsx)(j,{})},{id:2,heading:"Color",content:(0,v.jsx)(y,{})},{id:3,heading:"Print",content:(0,v.jsx)(I,{})}]);return(0,v.jsxs)("div",{className:"customization-features",children:[(0,v.jsx)(r.Z,{text:"Customize",color:"#a57867",size:"20px"}),(0,v.jsx)(b,{tabs:e})]})},N=e=>{let{children:t}=e;return(0,v.jsx)("div",{className:"container",children:t})},S=e=>{let{infoData:t}=e;return(0,v.jsxs)("div",{className:"customization-info",children:[(0,v.jsx)(r.Z,{classN:"customization-info-name",text:t.name,size:"22px",color:"#a57867"}),(0,v.jsx)(r.Z,{text:"AMD ".concat(t.price),size:"18px",color:"#c37489"})]})};var _=n(201);const k=()=>(0,v.jsx)("div",{className:"customization-body-loader",children:(0,v.jsx)("svg",{fill:"none",className:"customization-body-svg",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("circle",{className:"circle",cx:"50",cy:"50",r:"45"})})}),z=()=>{const[e,t]=(0,o.useState)("front"),n=(0,c.I0)();return(0,o.useEffect)((()=>{n((0,l.cu)(e))}),[e]),(0,v.jsxs)("div",{className:"positionBtns",children:[(0,v.jsx)("span",{onClick:()=>t("front"),children:"Front"}),(0,v.jsx)("span",{onClick:()=>t("back"),children:"Back"})]})},U=()=>{const e=(0,c.v9)(l.wm),t=(0,c.v9)(l.DP),n=(0,c.v9)(l.N3),r=(0,c.v9)(l.qD),d=(0,c.v9)(l.Xy),u=(0,c.v9)(l.Ep),h=(0,c.v9)(l.zf),g=(0,c.v9)(l.hE),[m,f]=(0,o.useState)([{src:i.Di,color:t,printImageURL:null===n||void 0===n?void 0:n.highresurl,activeCategory:r},{src:i.QM,color:t,printImageURL:null===n||void 0===n?void 0:n.highresurl,activeCategory:r}]),p=(0,c.I0)(),x=(0,o.useRef)(null),[w,b]=(0,o.useState)(.1);(0,o.useEffect)((()=>{(e=>{(0,_.Km)().then((t=>{e((0,l.go)(t))})).catch((e=>console.log(e)))})(p)}),[]),(0,o.useEffect)((()=>{if(console.log(r,"ccsca"),null!==e&&void 0!==e&&e.length){const o=async()=>{let o=m;for(let e=0;e<m.length;e++)switch(m[e].activeCategory=r,m[e].printImageURL=null===n||void 0===n?void 0:n.highresurl,h){case"tops":m[1].src=u,f(m);break;case"bottoms":m[0].src=u,f(m);break;case"top":m[1].color=t,f(m);break;case"bottom":m[0].color=t,f(m);break;default:m[1].color=t,m[0].color=t,f(m)}console.log(o,8787),console.log(r),await function(t,n){var o,r,c;let d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"front";if(console.log(t),!x.current||null===e||void 0===e||!e.length)return;p((0,l.j_)(!0));const u=x.current;u.width=i.bf,u.height=i.Cb;let h=null===(o=x.current)||void 0===o?void 0:o.getContext("2d");const g=new Image;g.src="front"===d?"".concat(i.jV).concat(null===e||void 0===e||null===(r=e[1])||void 0===r?void 0:r.fronturl):"".concat(i.jV).concat(null===e||void 0===e||null===(c=e[1])||void 0===c?void 0:c.backurl),g.onload=async()=>{await(null===h||void 0===h?void 0:h.drawImage(g,0,0,i.bf,i.Cb));for(let e=0;e<n.length;e++)console.log(n,"7454"),"color"===n[e].activeCategory?await s(n[e].src,n[e].color,h,i.bf,i.Cb):"print"===n[e].activeCategory?(console.log(1111),await a(n[e].printImageURL,n[e].src,h,i.bf,i.Cb,t)):await s(n[e].src,n[e].color,h,i.bf,i.Cb);await p((0,l.j_)(!1))}}(.2,m,g)};o()}}),[e,t,n,r,u,m,h,g]);return(0,v.jsx)(N,{children:(0,v.jsxs)("div",{className:"customization",children:[(0,v.jsx)(z,{}),(0,v.jsxs)("div",{className:"customization-body",children:[d&&(0,v.jsx)(k,{}),(0,v.jsx)("canvas",{className:"canvas",id:"canvas",ref:x})]}),(0,v.jsxs)("div",{className:"customization-body",children:[(0,v.jsx)(S,{infoData:{name:"the juliette dress",price:"59,775"}}),(0,v.jsx)(C,{})]})]})})}},201:(e,t,n)=>{n.d(t,{i9:()=>u,So:()=>d,Km:()=>v,qr:()=>g,BT:()=>h,pW:()=>m});var o=n(98);const s=[{name:"token",default:"",isJson:!1}],a=[];var i=function(e){return e.local="local",e.session="session",e}(i||{});const{localStorageSync:r,sessionStorageSync:l}=new class{constructor(){this.localStorageSync={},this.sessionStorageSync={},this.defineSyncProperties(s,i.local),this.defineSyncProperties(a,i.session)}defineSyncProperties(e,t){const n=this.getStorage(t);for(let o of e)Object.defineProperty(t===i.local?this.localStorageSync:this.sessionStorageSync,o.name,{get(){try{if("language"===o.name)return o.default;const e=n.getItem(o.name)||o.default;if(!o.isJson)return o.modifier?o.modifier(e):e;const t=e?JSON.parse(e):e;return o.modifier?o.modifier(t):t}catch(e){return o.default}},set(e){n.setItem(o.name,o.isJson?JSON.stringify(e):e)}})}getStorage(e){switch(e){case i.local:return localStorage;case i.session:return sessionStorage}}};class c{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o._n||"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.apiPrefix=e,this.baseUrl=t,this.headers=n,this.baseApi="",this.storeToken=l.privateToken,this.assocaiteToken=r.token,this.additionalHeaders=null,this.clearHeader=!0,this.baseApi=this.baseUrl+this.apiPrefix||""}getAuthHeader(){return this.headers||this.buildHeaders(this.storeToken,this.assocaiteToken)}setAdditionalHeaders(e){this.additionalHeaders=e}removeDefaultHeader(){this.clearHeader=!1}buildHeaders(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{"Content-Type":"application/json",...e&&{Authorization:"Bearer ".concat(e)},...t&&{"Associate-Authorization":"".concat(t)},...this.additionalHeaders}}getUrl(e){return"".concat(this.baseApi).concat(e)}handleResponse(e){if(!e.ok)throw console.error("Error response:",e),new Error("Network response was not ok");return e.json()}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getAuthHeader();return fetch(this.getUrl(e),{headers:t}).then(this.handleResponse)}post(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getAuthHeader();return fetch(this.getUrl(e),{method:"POST",headers:n,redirect:"follow",cache:"no-cache",body:JSON.stringify(t)}).then(this.handleResponse).catch((e=>console.log(e)))}put(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getAuthHeader();return fetch(this.getUrl(e),{method:"PUT",headers:n,redirect:"follow",cache:"no-cache",body:JSON.stringify(t)}).then(this.handleResponse)}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getAuthHeader();return fetch(this.getUrl(e),{headers:t}).then(this.handleResponse)}}const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new c("/api").get(o.YO,e)},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new c("/api").get(o.Uc,e)},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new c("/api").get(o.dE,e)},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new c("/api").get(o.Tc,e)},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new c("/api").get(o.E8,e)},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new c("/api").get(o.R2,e)}},98:(e,t,n)=>{n.d(t,{Cb:()=>v,Di:()=>f,E8:()=>r,ED:()=>u,QM:()=>m,R2:()=>p,Tc:()=>b,Uc:()=>i,YO:()=>a,Z7:()=>h,_n:()=>o,bf:()=>g,dE:()=>w,jV:()=>c,uT:()=>x});const o="http://3.209.214.176",s=o+"/api/uploads/",a="/colors-variants",i="/colors-palettes",r="/mannequins",l=s+"mannequins/",c=l+"fronts/",d=s+"prints/",u=d+"highs/",h=d+"previews/",g=600,v=900,m="/image/Silhouettes/top/jacket-bodice.png",f="/image/Silhouettes/bottom/pant2.png",p="/silhouettes-types",x=s+"silhouettes/",w="/prints-variants",b="/prints-palettes"},93:(e,t,n)=>{n.d(t,{VV:()=>a,ln:()=>s,ue:()=>o});const o="#aa8a75",s=(e,t,n)=>{let o={[n]:[],name:"",_id:""};return null===e||void 0===e||e.find((e=>{const{grouped:s=[]}=e||{};null===s||void 0===s||s.find((e=>{const{variant:a=[]}=e||{},{name:i="",_id:r=""}=a[0]||{};if(t.toLowerCase()===i.toLowerCase())return o[n]=s,o.name=i,o._id=r,o}))})),o},a=e=>null===e||void 0===e?void 0:e.reduce(((e,t)=>(e.push({id:null===t||void 0===t?void 0:t._id,text:null===t||void 0===t?void 0:t.name,value:null===t||void 0===t?void 0:t.name}),e)),[])},971:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(184);const s=e=>{let{text:t,classN:n="",color:s="",size:a="",align:i="left"}=e;return(0,o.jsx)("h1",{className:"headingUI ".concat(n),style:{color:s||"#000",fontSize:a||"30px",textAlign:i},children:t})}},111:()=>{},49:()=>{}}]);
//# sourceMappingURL=801.9a35b515.chunk.js.map