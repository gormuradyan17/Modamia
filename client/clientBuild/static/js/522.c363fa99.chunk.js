"use strict";(self.webpackChunkmodamia_app=self.webpackChunkmodamia_app||[]).push([[522],{4504:(o,n,i)=>{i.d(n,{Z:()=>e});var t=i(184);const e=o=>{let{children:n}=o;return(0,t.jsx)("div",{className:"container",children:n})}},7098:(o,n,i)=>{i.d(n,{ED:()=>c,IU:()=>k,Ic:()=>p,R2:()=>g,Tc:()=>m,Uc:()=>d,YO:()=>l,Z7:()=>u,_n:()=>t,dE:()=>f,gY:()=>w,jV:()=>s,pS:()=>I,uT:()=>h,uW:()=>r});const t="http://3.209.214.176",e=t+"/api/uploads/",l="/colors-variants",d="/colors-palettes",a=e+"mannequins/",s=a+"fronts/",r=a+"backs/",v=e+"prints/",c=v+"highs/",u=v+"previews/",g="/silhouettes-types",h=e+"silhouettes/",f="/prints-variants",m="/prints-palettes",p="/sizes",w="/garments",I="/garment",k="/search-garment"},555:(o,n,i)=>{i.d(n,{W$:()=>r});var t=i(7098),e=i(6037);const l=[];async function d(o,n,i,t,e,l){const d=o.src||e.src,a=o.color||e.color,s=o.position||e.position,r=o.order||e.order,v=l?o.width/10:o.width||e.width,c=l?o.height/10:o.height||e.height,u=o.id||e.id;if(!d)return;const g=new Image;return g.src=await async function(o,n,i,t){const e=new Image;e.src=o,e.crossOrigin="*",await new Promise((o=>{e.onload=o}));const l=document.createElement("canvas").getContext("2d");if(!l)return"";if(l.canvas.width=i,l.canvas.height=t,l.clearRect(0,0,i,t),l.drawImage(e,0,0,i,t),n){const o=l.getImageData(0,0,i,t),e=o.data;let d=parseInt(n.substring(1),16);if(3===n.substring(1).length){let o="";for(let i=0;i<3;i++)o+=n.substring(1)[i]+n.substring(1)[i];d=parseInt(o,16)}const a=(16711680&d)>>16,s=(65280&d)>>8,r=255&d;let v;for(let n=0;n<e.length;n+=4)v=(e[n]/255+e[n+1]/255+e[n+2]/255+e[n+3]/255)/4,e[n]=a*v,e[n+1]=s*v,e[n+2]=r*v;l.putImageData(o,0,0)}return l.canvas.toDataURL("image/png")}(d,a,n,i),await new Promise((o=>{g.onload=o})),{img:g,position:s,color:a,widthImg:v,heightImg:c,order:r,frontBack:t,id:u}}async function a(o,n,i,t,e,l,d,a,s){if(!n)return i;const r=new Image;if(r.src=n,r.crossOrigin="*",await new Promise((o=>{r.onload=o})),!i)return i.drawImage(r,0,0,t,e);o||i.drawImage(r,0,"bottom"===d?e-s:0,a,s);const v=document.createElement("canvas").getContext("2d");if(!v)return i.drawImage(r,0,0,t,e);v.canvas.width=t,v.canvas.height=e,v.clearRect(0,0,t,e),v.drawImage(r,0,0,t,e);const c=v.getImageData(0,0,t,e).data;let u=new Image;u.src=o,u.crossOrigin="*",await new Promise((o=>{u.onload=o}));const g=document.createElement("canvas").getContext("2d");if(!g)return i.drawImage(r,0,0,t,e);g.canvas.width=t,g.canvas.height=e,g.globalAlpha=1,g.globalCompositeOperation="multiply",g.clearRect(0,0,t,e),g.drawImage(r,0,0,t,e);for(let p=0;p*u.width*l<t;p++)for(let o=0;o*e*l<e;o++)g.drawImage(u,0,0,u.width,u.height,p*t*l,o*e*l,t*l,e*l);const h=g.getImageData(0,0,t,e),f=h.data;for(let p=0;p<c.length;p+=4)f[p+3]=c[p+3];g.putImageData(h,0,0);const m=new Image;return m.src=g.canvas.toDataURL("image/png"),await new Promise((o=>m.onload=o)),i.drawImage(m,0,d.includes("bottom")?e-s:0,a,s)}let s;const r=function(o,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fronts",r=arguments.length>3?arguments[3]:void 0,v=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0;if(!r.current||null===v||void 0===v||!v._id)return;const g=r.current;let h=null===g||void 0===g?void 0:g.getContext("2d");const f=new Image;f.src="fronts"===i?"".concat(t.jV).concat(null===v||void 0===v?void 0:v.fronturl):"backs"===i?"".concat(t.uW).concat(null===v||void 0===v?void 0:v.backurl):"".concat(t.jV).concat(null===v||void 0===v?void 0:v.fronturl),f.onload=async()=>{const t=u?v.width/10:v.width,g=u?v.height/10:v.height;r.current.width=t,r.current.height=g;const m=t/g;let p=t,w=t/m;w>g&&(w=g,p=g*m);const I=(t-p)/2,k=(g-w)/2;null===h||void 0===h||h.clearRect(0,0,t,g),null===h||void 0===h||h.drawImage(f,I,k,p,w);const b=l.findIndex((o=>"sleeves"===(null===o||void 0===o?void 0:o.frontBack)));!n.sleeves[0].src&&l.length>2&&l.splice(b,1);for(let r=0;r<n[i].length;r++)if("color"===n[i][r].activeCategory)s=await d(n[i][r],t,g,i,c[i][r],u),(0,e.HA)(s,l,i),"sleeves"===i&&(s=await d(n.fronts[r],t,g,"fronts",c.fronts[r],u),(0,e.HA)(s,l,i));else if("print"===n[i][r].activeCategory){var y,B,C,x,_,R,D,L,U,z,A,E,O,P,V,j,H,T,W,q,Y,Z,N,S,$,F,G,J,K,M,Q,X,oo,no,io,to;if(a(n[i][r].printImageURL,null!==(y=n[i])&&void 0!==y&&null!==(B=y[r])&&void 0!==B&&B.src?null===(C=n[i])||void 0===C||null===(x=C[r])||void 0===x?void 0:x.src:null===(_=c[i])||void 0===_||null===(R=_[r])||void 0===R?void 0:R.src,h,t,g,o,n[i][r].position?n[i][r].position:c[i][r].position,null!==(D=n[i])&&void 0!==D&&null!==(L=D[r])&&void 0!==L&&L.width?null===(U=n[i])||void 0===U||null===(z=U[r])||void 0===z?void 0:z.width:null===(A=c[i])||void 0===A||null===(E=A[r])||void 0===E?void 0:E.width,null!==(O=n[i])&&void 0!==O&&null!==(P=O[r])&&void 0!==P&&P.height?null===(V=n[i])||void 0===V||null===(j=V[r])||void 0===j?void 0:j.height:null===(H=c[i])||void 0===H||null===(T=H[r])||void 0===T?void 0:T.height),"sleeves"===i)a(n.fronts[r].printImageURL,null!==(W=n.fronts)&&void 0!==W&&null!==(q=W[r])&&void 0!==q&&q.src?null===(Y=n.fronts)||void 0===Y||null===(Z=Y[r])||void 0===Z?void 0:Z.src:null===(N=c.fronts)||void 0===N||null===(S=N[r])||void 0===S?void 0:S.src,h,t,g,o,n.fronts[r].position,null!==($=n.fronts)&&void 0!==$&&null!==(F=$[r])&&void 0!==F&&F.width?null===(G=n.fronts)||void 0===G||null===(J=G[r])||void 0===J?void 0:J.width:null===(K=c.fronts)||void 0===K||null===(M=K[r])||void 0===M?void 0:M.width,null!==(Q=n.fronts)&&void 0!==Q&&null!==(X=Q[r])&&void 0!==X&&X.height?null===(oo=n.fronts)||void 0===oo||null===(no=oo[r])||void 0===no?void 0:no.height:null===(io=c.fronts)||void 0===io||null===(to=io[r])||void 0===to?void 0:to.height)}else{var eo;s=await d(null===(eo=n[i])||void 0===eo?void 0:eo[r],t,g,i,c[i][r],u),(0,e.HA)(s,l,i)}await async function(o,n){const i=o.sort(((o,n)=>o.order-n.order));for(const t of i){const{img:o,position:i,widthImg:e,heightImg:l}=t;n.drawImage(o,0,i.includes("bottom")?n.canvas.height-l:0,e,l)}}(l,h)}}},6037:(o,n,i)=>{i.d(n,{ue:()=>e,q9:()=>s,VV:()=>a,ky:()=>d,ln:()=>l,HA:()=>r});var t=i(7098);const e="#aa8a75",l=(o,n,i)=>{let t={[i]:[],name:"",_id:""};return null===o||void 0===o||o.find((o=>{const{grouped:e=[]}=o||{};null===e||void 0===e||e.find((o=>{const{variant:l=[]}=o||{},{name:d="",_id:a=""}=l[0]||{};if(n.toLowerCase()===d.toLowerCase())return t[i]=e,t.name=d,t._id=a,t}))})),t},d=(o,n)=>{const i=n.reduce(((n,i)=>{const t=null===o||void 0===o?void 0:o.find((o=>(null===o||void 0===o?void 0:o._id)===i));return t&&n.push(t),n}),[]);return i.length?null===i||void 0===i?void 0:i.reduce(((o,n)=>(o.push({id:null===n||void 0===n?void 0:n._id,text:(null===n||void 0===n?void 0:n.name)||(null===n||void 0===n?void 0:n.size),value:(null===n||void 0===n?void 0:n.name)||(null===n||void 0===n?void 0:n.size)}),o)),[]):[]},a=o=>null===o||void 0===o?void 0:o.reduce(((o,n)=>(o.push({id:null===n||void 0===n?void 0:n._id,text:(null===n||void 0===n?void 0:n.name)||(null===n||void 0===n?void 0:n.size),value:(null===n||void 0===n?void 0:n.name)||(null===n||void 0===n?void 0:n.size)}),o)),[]),s=(o,n,i)=>{const e=t.uT,l=(t,l)=>{var d;const a=null===o||void 0===o||null===(d=o[t])||void 0===d?void 0:d[l][0],s="sleeves"===n?l="sleeves":l;return{src:null!==a&&void 0!==a&&a.silhouetteurl?"".concat(e).concat(s,"/").concat(a.silhouetteurl):"",position:i,color:(null===a||void 0===a?void 0:a.color)||"",printImageURL:"",activeCategory:"",price:null===a||void 0===a?void 0:a.price,width:null===a||void 0===a?void 0:a.width,height:null===a||void 0===a?void 0:a.height,order:null===a||void 0===a?void 0:a.order,id:null===a||void 0===a?void 0:a._id}};return"fronts"===n?l("fronts","top"===i?"tops":"bottoms"):"backs"===n?l("backs","top"===i?"tops":"bottoms"):void 0};async function r(o,n,i){if(o)if(n.length<2||"sleeves"===i&&n.length<=2)n.push(o);else{const i=n.findIndex((o=>"sleeves"===(null===o||void 0===o?void 0:o.frontBack))),t=n.findIndex((o=>("fronts"===(null===o||void 0===o?void 0:o.frontBack)||"backs"===(null===o||void 0===o?void 0:o.frontBack))&&"top"===(null===o||void 0===o?void 0:o.position))),e=n.findIndex((o=>("fronts"===(null===o||void 0===o?void 0:o.frontBack)||"backs"===(null===o||void 0===o?void 0:o.frontBack))&&"bottom"===(null===o||void 0===o?void 0:o.position)));"top"!==(null===o||void 0===o?void 0:o.position)||"fronts"!==o.frontBack&&"backs"!==o.frontBack?"bottom"!==(null===o||void 0===o?void 0:o.position)||"fronts"!==o.frontBack&&"backs"!==o.frontBack?"sleeves"===(null===o||void 0===o?void 0:o.frontBack)&&n.splice(i,1,o):n.splice(e,1,o):n.splice(t,1,o)}}}}]);
//# sourceMappingURL=522.c363fa99.chunk.js.map