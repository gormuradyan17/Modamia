"use strict";(self.webpackChunkmodamia_app=self.webpackChunkmodamia_app||[]).push([[664],{664:(e,a,t)=>{t.r(a),t.d(a,{default:()=>j});var n=t(791),s=t(98);async function c(e,a,t,n,s){const c=new Image;c.src=await async function(e,a,t,n){const s=new Image;s.src=e,await new Promise((e=>{s.onload=e}));const c=document.createElement("canvas").getContext("2d");if(!c)return"";if(c.canvas.width=t,c.canvas.height=n,c.clearRect(0,0,t,n),c.drawImage(s,0,0,t,n),a){const e=c.getImageData(0,0,t,n),s=e.data;let i=parseInt(a.substring(1),16);if(3===a.substring(1).length){let e="";for(let t=0;t<3;t++)e+=a.substring(1)[t]+a.substring(1)[t];i=parseInt(e,16)}const o=(16711680&i)>>16,r=(65280&i)>>8,l=255&i;let d;for(let a=0;a<s.length;a+=4)d=(s[a]/255+s[a+1]/255+s[a+2]/255+s[a+3]/255)/4,s[a]=o*d,s[a+1]=r*d,s[a+2]=l*d;c.putImageData(e,0,0)}return c.canvas.toDataURL("image/png")}(e,a,n,s),await new Promise((e=>{c.onload=e})),t.drawImage(c,0,0,n,s)}async function i(e,a,t,n,s,c){const i=new Image;if(i.src=a,await new Promise((e=>{i.onload=e})),!t)return t.drawImage(i,0,0,n,s);if(!e)return t.drawImage(i,0,0,n,s);const o=document.createElement("canvas").getContext("2d");if(!o)return t.drawImage(i,0,0,n,s);o.canvas.width=n,o.canvas.height=s,o.clearRect(0,0,n,s),o.drawImage(i,0,0,n,s);const r=o.getImageData(0,0,n,s).data;let l=new Image;l.src=e,await new Promise((e=>{l.onload=e})),l.crossOrigin="*";const d=document.createElement("canvas").getContext("2d");if(!d)return t.drawImage(i,0,0,n,s);d.canvas.width=n,d.canvas.height=s,d.globalAlpha=1,d.globalCompositeOperation="multiply",o.clearRect(0,0,n,s),d.drawImage(i,0,0,n,s),d.drawImage(l,0,0,n,s);const g=d.getImageData(0,0,n,s),m=g.data;for(let h=0;h<r.length;h+=4)m[h+3]=r[h+3];d.putImageData(g,0,0);const u=new Image;return u.src=d.canvas.toDataURL("image/png"),await new Promise((e=>u.onload=e)),t.drawImage(u,0,0,n,s)}const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"color";return[{src:s.Di,color:e,printImageURL:null===a||void 0===a?void 0:a.highresurl,category:t},{src:s.QM,color:e,printImageURL:null===a||void 0===a?void 0:a.highresurl,category:t}]};var r=t(971),l=t(877),d=t(434),g=t(184);const m=e=>{let{tabs:a}=e;const t=(0,d.I0)(),[s,c]=(0,n.useState)("");return(0,n.useEffect)((()=>{a&&c(a[0].heading)}),[a]),(0,g.jsx)("div",{className:"TabUI",children:(0,g.jsxs)("div",{className:"TabUI-body",children:[(0,g.jsx)("div",{className:"TabUI-heads",children:a&&a.map(((e,a)=>(0,g.jsx)("div",{className:"TabUI-head ".concat(e.heading===s?"_active":""),onClick:()=>{c(e.heading);(e=>{t((0,l.Qr)(e))})("Color"===e.id?"color":"Print"===e.id?"print":"")},children:(0,g.jsx)(r.Z,{color:"#000",text:e.heading,size:"18px",align:"left"})},e.id||a)))}),(0,g.jsx)("div",{className:"TabUI-contents",children:a&&a.map(((e,a)=>(0,g.jsx)("div",{className:"TabUI-content ".concat(e.heading===s?"_active":""),children:e.content||(0,g.jsx)(r.Z,{color:"black",size:"16px",text:"Nothing to show"})},e.id||a)))})]})})},u=(0,n.lazy)((()=>t.e(293).then(t.bind(t,293)))),h=(0,n.lazy)((()=>t.e(416).then(t.bind(t,416)))),v=(0,n.lazy)((()=>t.e(301).then(t.bind(t,301)))),x=()=>{const[e,a]=(0,n.useState)([{id:"Silhouette",heading:"Silhouette",content:(0,g.jsx)(u,{})},{id:"Color",heading:"Color",content:(0,g.jsx)(h,{})},{id:"Print",heading:"Print",content:(0,g.jsx)(v,{})}]);return(0,g.jsxs)("div",{className:"customization-features",children:[(0,g.jsx)(r.Z,{text:"Customize",color:"#a57867",size:"20px"}),(0,g.jsx)(m,{tabs:e})]})},f=e=>{let{children:a}=e;return(0,g.jsx)("div",{className:"container",children:a})},w=e=>{let{infoData:a}=e;return(0,g.jsxs)("div",{className:"customization-info",children:[(0,g.jsx)(r.Z,{classN:"customization-info-name",text:a.name,size:"22px",color:"#a57867"}),(0,g.jsx)(r.Z,{text:"AMD ".concat(a.price),size:"18px",color:"#c37489"})]})};var I=t(201);const b=()=>(0,g.jsx)("div",{className:"customization-body-loader",children:(0,g.jsx)("svg",{fill:"none",className:"customization-body-svg",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:(0,g.jsx)("circle",{className:"circle",cx:"50",cy:"50",r:"45"})})}),j=()=>{const[e,a]=(0,n.useState)([]),t=(0,d.v9)(l.wm),r=(0,d.v9)(l.DP),m=(0,d.v9)(l.N3),u=(0,d.v9)(l.qD),h=(0,d.v9)(l.Xy),v=(0,d.I0)(),[j,p]=(0,n.useState)(o()),N=(0,n.useRef)(null),[y,z]=(0,n.useState)(.1),C=(e,a)=>{var n,o;if(!N.current||null===t||void 0===t||!t.length)return;v((0,l.j_)(!0));const r=N.current;r.width=s.bf,r.height=s.Cb;const d=null===(n=N.current)||void 0===n?void 0:n.getContext("2d"),g=new Image;g.src="".concat(s.jV).concat(null===t||void 0===t||null===(o=t[1])||void 0===o?void 0:o.fronturl),g.onload=async()=>{null===d||void 0===d||d.drawImage(g,0,0,s.bf,s.Cb);for(let e=0;e<a.length;e++)"color"===a[e].category?await c(a[e].src,a[e].color,d,s.bf,s.Cb):"print"===a[e].category?await i(a[e].printImageURL,a[e].src,d,s.bf,s.Cb):await c(a[e].src,"",d,s.bf,s.Cb);await v((0,l.j_)(!1))}};(0,n.useEffect)((()=>{(e=>{(0,I.Km)().then((a=>{e((0,l.go)(a))})).catch((e=>console.log(e)))})(v)}),[]),(0,n.useEffect)((()=>{console.log("isLoading => ",h)}),[h]),(0,n.useEffect)((()=>{null!==t&&void 0!==t&&t.length&&C(0,j)}),[t,j]),(0,n.useEffect)((()=>{C(0,o(r,m,u)),p(o(r,m,u))}),[r,m,u]);return(0,g.jsx)(f,{children:(0,g.jsxs)("div",{className:"customization",children:[(0,g.jsxs)("div",{className:"customization-body",children:[h&&(0,g.jsx)(b,{}),(0,g.jsx)("canvas",{className:"canvas",id:"canvas",ref:N})]}),(0,g.jsxs)("div",{className:"customization-body",children:[(0,g.jsx)(w,{infoData:{name:"the juliette dress",price:"59,775"}}),(0,g.jsx)(x,{})]})]})})}},971:(e,a,t)=>{t.d(a,{Z:()=>s});var n=t(184);const s=e=>{let{text:a,classN:t="",color:s="",size:c="",align:i="left"}=e;return(0,n.jsx)("h1",{className:"headingUI ".concat(t),style:{color:s||"#000",fontSize:c||"30px",textAlign:i},children:a})}}}]);
//# sourceMappingURL=664.67d0a83c.chunk.js.map